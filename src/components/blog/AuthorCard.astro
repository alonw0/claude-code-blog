---
import Card from '../ui/Card.astro';

interface Props {
  name: string;
  bio: string;
  avatar: string;
  authorId: string;
  postCount?: number;
  social?: {
    github?: string;
    twitter?: string;
    website?: string;
    linkedin?: string;
    medium?: string;
  };
}

const { name, bio, avatar, authorId, postCount, social } = Astro.props;
---

<Card hover class="p-6 flex flex-col h-full">
  <a href={`/authors/${authorId}`} class="flex flex-col h-full">
    <div class="flex items-start gap-4 mb-4">
      <img
        src={avatar}
        alt={name}
        class="w-16 h-16 rounded-full border-2 border-[rgb(var(--color-clay))] flex-shrink-0"
      />
      <div class="flex-1 min-w-0">
        <h3 class="font-mono font-semibold text-lg mb-1 hover:text-[rgb(var(--color-clay))] transition-colors">
          {name}
        </h3>
        {postCount !== undefined && (
          <p class="text-sm text-[rgb(var(--color-text-muted))] font-mono">
            {postCount} {postCount === 1 ? 'post' : 'posts'}
          </p>
        )}
      </div>
    </div>

    <p class="text-[rgb(var(--color-text-muted))] mb-4 flex-1">
      {bio}
    </p>

    {social && (
      <div class="flex flex-wrap gap-3 pt-4 border-t border-[rgb(var(--color-border))]">
        {social.github && (
          <a
            href={`https://github.com/${social.github}`}
            class="text-sm text-[rgb(var(--color-clay))] hover:underline"
            target="_blank"
            rel="noopener noreferrer"
            onclick="event.stopPropagation()"
          >
            GitHub
          </a>
        )}
        {social.twitter && (
          <a
            href={`https://twitter.com/${social.twitter}`}
            class="text-sm text-[rgb(var(--color-clay))] hover:underline"
            target="_blank"
            rel="noopener noreferrer"
            onclick="event.stopPropagation()"
          >
            Twitter
          </a>
        )}
        {social.medium && (
          <a
            href={social.medium}
            class="text-sm text-[rgb(var(--color-clay))] hover:underline"
            target="_blank"
            rel="noopener noreferrer"
            onclick="event.stopPropagation()"
          >
            Medium
          </a>
        )}
        {social.linkedin && (
          <a
            href={`https://linkedin.com/in/${social.linkedin}`}
            class="text-sm text-[rgb(var(--color-clay))] hover:underline"
            target="_blank"
            rel="noopener noreferrer"
            onclick="event.stopPropagation()"
          >
            LinkedIn
          </a>
        )}
        {social.website && (
          <a
            href={social.website}
            class="text-sm text-[rgb(var(--color-clay))] hover:underline"
            target="_blank"
            rel="noopener noreferrer"
            onclick="event.stopPropagation()"
          >
            Website
          </a>
        )}
      </div>
    )}
  </a>
</Card>
